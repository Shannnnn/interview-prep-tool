{% extends 'base.html' %}

{% block content %}
<div class="max-w-5xl mx-auto px-4 py-12">
    <header class="text-center mb-12">
        <h1 class="text-4xl font-extrabold text-slate-900 mb-4">Interview Prep Master</h1>
        <p class="text-slate-500 mb-6">Practice with AI-generated high-level tech questions.</p>
        
        <button hx-post="{% url 'fetch_questions_view' %}" 
                hx-target="#question-results" 
                hx-swap="innerHTML"
                hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
                class="inline-flex items-center px-6 py-3 bg-slate-900 text-white font-semibold rounded-xl hover:bg-slate-800 transition-all active:scale-95 shadow-lg group">
            <span class="mr-2 group-active:animate-spin">ðŸš€</span> 
            Sync AI Questions
        </button>
    </header>

    <div class="flex flex-wrap justify-center gap-2 mb-8">
    <button hx-get="{% url 'question_list' %}" hx-target="#question-results" class="px-4 py-2 rounded-full bg-slate-200 text-slate-700 hover:bg-slate-300 transition">All</button>
    <button hx-get="{% url 'question_list' %}?category=DJ" hx-target="#question-results" class="px-4 py-2 rounded-full bg-blue-100 text-blue-700 hover:bg-blue-200 transition">Django</button>
    <button hx-get="{% url 'question_list' %}?category=PY" hx-target="#question-results" class="px-4 py-2 rounded-full bg-green-100 text-green-700 hover:bg-green-200 transition">Python</button>
    <button hx-get="{% url 'question_list' %}?category=MA" hx-target="#question-results" class="px-4 py-2 rounded-full bg-purple-100 text-purple-700 hover:bg-purple-200 transition">Math</button>
    </div>

    <div class="flex flex-wrap justify-center gap-2 mb-8 border-t border-slate-100 pt-6">
    <span class="w-full text-center text-xs font-bold text-slate-400 uppercase mb-2">Filter by Level</span>
    <button hx-get="{% url 'question_list' %}?difficulty=Junior" hx-target="#question-results" class="px-4 py-1 rounded-full border border-green-200 text-green-700 hover:bg-green-50 transition">Junior</button>
    <button hx-get="{% url 'question_list' %}?difficulty=Mid" hx-target="#question-results" class="px-4 py-1 rounded-full border border-orange-200 text-orange-700 hover:bg-orange-50 transition">Mid</button>
    <button hx-get="{% url 'question_list' %}?difficulty=Senior" hx-target="#question-results" class="px-4 py-1 rounded-full border border-red-200 text-red-700 hover:bg-red-50 transition">Senior</button>
    </div>

    <div class="mb-8 max-w-xl mx-auto">
        <div class="relative">
            <input type="text" 
                   name="search" 
                   hx-get="{% url 'question_list' %}" 
                   hx-trigger="keyup changed delay:300ms" 
                   hx-target="#question-results" 
                   placeholder="Search..." 
                   class="...">
        </div>
    </div>

    <div id="question-results" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {% include 'questions/partials/question_items.html' %}
    </div>
</div>
{% endblock %}